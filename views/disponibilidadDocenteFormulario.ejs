<form id="formulario" class="professor/avails" action="/agregar-professor-availabilities" method="POST">
    <div class="mb-3">
        <label for="teacher_search" class="form-label">Buscar Docente</label>
        <input type="text" class="form-control" id="teacher_search" name="teacher_search"
            placeholder="Ingrese el nombre del docente" required>
        <div id="teacher_suggestions" class="suggestions"></div>
    </div>

    <div class="mb-3">
        <label for="day" class="form-label">Día</label>
        <select class="form-select" id="day" name="day" required>
            <option value="Lunes">Lunes</option>
            <option value="Martes">Martes</option>
            <option value="Miércoles">Miércoles</option>
            <option value="Jueves">Jueves</option>
            <option value="Viernes">Viernes</option>
            <option value="Sábado">Sábado</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Disponibilidad Horaria</label>
        <table class="table">
            <thead>
                <tr>
                    <th>Hora</th>
                    <th>Disponible</th>
                </tr>
            </thead>
            <tbody>
                <!-- Generar filas de tabla para los intervalos horarios -->
                <tr>
                    <td>7:10-8:00</td>
                    <td>
                        <input type="checkbox" name="availability[7:10-8:00]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>8:00-8:50</td>
                    <td>
                        <input type="checkbox" name="availability[8:00-8:50]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>9:00-9:50</td>
                    <td>
                        <input type="checkbox" name="availability[9:00-9:50]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>9:50-10:40</td>
                    <td>
                        <input type="checkbox" name="availability[9:50-10:40]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>10:50-11:40</td>
                    <td>
                        <input type="checkbox" name="availability[10:50-11:40]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>11:40-12:30</td>
                    <td>
                        <input type="checkbox" name="availability[11:40-12:30]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>13:30-14:20</td>
                    <td>
                        <input type="checkbox" name="availability[13:30-14:20]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>14:20-15:10</td>
                    <td>
                        <input type="checkbox" name="availability[14:20-15:10]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>15:10-16:00</td>
                    <td>
                        <input type="checkbox" name="availability[15:10-16:00]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>16:00-17:10</td>
                    <td>
                        <input type="checkbox" name="availability[16:00-17:10]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>17:10-18:00</td>
                    <td>
                        <input type="checkbox" name="availability[17:10-18:00]" value="true">
                    </td>
                </tr>
                <tr>
                    <td>18:00-19:00</td>
                    <td>
                        <input type="checkbox" name="availability[18:00-19:00]" value="true">
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <button type="button" class="btn btn-secondary" id="agregarDia">Agregar Día</button>

    <button type="submit" class="btn btn-primary">Definir Disponibilidad</button>

    <script>
        // Script para agregar un nuevo día con los mismos intervalos horarios
        document.getElementById('agregarDia').addEventListener('click', function () {
            var daySelect = document.getElementById('day');
            var selectedDay = daySelect.options[daySelect.selectedIndex].value;

            // Clonar y agregar filas para los intervalos horarios genéricos
            var tableBody = document.querySelector('.table tbody');
            var genericRows = tableBody.querySelectorAll('tr');
            genericRows.forEach(function (genericRow) {
                var newRow = genericRow.cloneNode(true);
                var dayCell = newRow.cells[0];
                dayCell.textContent = selectedDay + ' - ' + dayCell.textContent;
                tableBody.appendChild(newRow);
            });
        });

        // Script para la función de búsqueda de docentes
        document.getElementById('teacher_search').addEventListener('input', function () {
            var searchInput = this.value.toLowerCase();
            var suggestionsContainer = document.getElementById('teacher_suggestions');
            suggestionsContainer.innerHTML = '';

            // Simulación de datos de docentes
            var teachers = ['Profesor 1', 'Profesor 2', 'Profesor 3', 'Otro Profesor'];

            // Filtrar docentes que coincidan con la búsqueda
            var matchingTeachers = teachers.filter(function (teacher) {
                return teacher.toLowerCase().includes(searchInput);
            });

            // Mostrar sugerencias
            matchingTeachers.forEach(function (teacher) {
                var suggestion = document.createElement('div');
                suggestion.className = 'suggestion';
                suggestion.textContent = teacher;
                suggestion.addEventListener('click', function () {
                    document.getElementById('teacher_search').value = teacher;
                    suggestionsContainer.innerHTML = '';
                });
                suggestionsContainer.appendChild(suggestion);
            });
        });
    </script>
</form>